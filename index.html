<!DOCTYPE html>
<html>
<head>
    <title>Birthday Holidays!</title>
</head>
<body>
    <form>
        What is your birthday?
        <select id="month">
            <option value="January">January</option>
            <option value="February">February</option>
            <option value="March">March</option>
            <option value="April">April</option>
            <option value="May">May</option>
            <option value="June">June</option>
            <option value="July">July</option>
            <option value="August">August</option>
            <option value="September">September</option>
            <option value="October">October</option>
            <option value="November">November</option>
            <option value="December">December</option>
        </select>
        <select id="day">
            <option value="1st">1</option>
            <option value="2nd">2</option>
            <option value="3rd">3</option>
            <option value="4th">4</option>
            <option value="5th">5</option>
            <option value="6th">6</option>
            <option value="7th">7</option>
            <option value="8th">8</option>
            <option value="9th">9</option>
            <option value="10th">10</option>
            <option value="11th">11</option>
            <option value="12th">12</option>
            <option value="13th">13</option>
            <option value="14th">14</option>
            <option value="15th">15</option>
            <option value="16th">16</option>
            <option value="17th">17</option>
            <option value="18th">18</option>
            <option value="19th">19</option>
            <option value="20th">20</option>
            <option value="21st">21</option>
            <option value="22nd">22</option>
            <option value="23rd">23</option>
            <option value="24th">24</option>
            <option value="25th">25</option>
            <option value="26th">26</option>
            <option value="27th">27</option>
            <option value="28th">28</option>
            <option value="29th">29</option>
            <option value="30th">30</option>
            <option value="31st">31</option>
        </select>
        <select id="year">
            <option value="2003">2003</option>
            <option value="2002">2002</option>
            <option value="2001">2001</option>
            <option value="2000">2000</option>
            <option value="1999">1999</option>
            <option value="1998">1998</option>
            <option value="1997">1997</option>
            <option value="1996">1996</option>
            <option value="1995">1995</option>
            <option value="1994">1994</option>
            <option value="1993">1993</option>
            <option value="1992">1992</option>
            <option value="1991">1991</option>
            <option value="1990">1990</option>
            <option value="1989">1989</option>
            <option value="1988">1988</option>
            <option value="1987">1987</option>
            <option value="1986">1986</option>
            <option value="1985">1985</option>
            <option value="1984">1984</option>
            <option value="1983">1983</option>
            <option value="1982">1982</option>
            <option value="1981">1981</option>
            <option value="1980">1980</option>
        </select>
        <br/>
        <input id="birthdayButton" type="submit" value="Submit">
    </form>
    <p>Birthday:</p>
    <textarea id="displayBDay">No Birthday</textarea>
    <p>Interesting things that happened on this day in history:</p>
    <div id="thisDay">No History</div>
    
<script src="http://code.jquery.com/jquery-3.2.1.min.js"></script>
<script>
$(document).ready(function() {
     $("#birthdayButton").on('click', e => {
        let value = $("#month").val() + " " + $("#day").val() + ", " + $("#year").val();
        console.log(value);
        e.preventDefault();
        $("#displayBDay").text(value);
         
        let myurl= "https://holidayapi.com/v1/holidays?key=6a44a9e5-815d-447c-a25f-cc0cabbbcde5&country=US&year=";
        myurl += $("#year").val() + "&month=" + $("#month").val();
        console.log(myurl);
        $.ajax({
            url : myurl,
            dataType : "json",
            success : function(parsed_json) {
                console.log(parsed_json);
                let location = parsed_json['name'];
                let weather = parsed_json['weather'][0]['description'];
                let temp = parsed_json['main']['temp'];
                let weather_icon = parsed_json['weather'][0]['icon'];
                let humidity = parsed_json['main']['humidity'];
                let temp_min = parsed_json['main']['temp_min'];
                let temp_max = parsed_json['main']['temp_max'];
                let wind_speed = parsed_json['wind']['speed'];
                let everything = "<img src=\"http://openweathermap.org/img/w/" + weather_icon + ".png\"/>"
                everything += "<ul>";
                everything += "<li>Location: " + location;
                everything += "<li>Weather: " + weather + " (" + temp + "&#8457;)";
                everything += "<li>Low: " + temp_min + "&#8457; | High: " + temp_max + "&#8457;";
                everything += "<li>Humidity: " + humidity + "%";
                everything += "<li>Wind: " + wind_speed + " mph";
                everything += "</ul>";
                $("#weather").html(everything);
            }
        });
         
     });
     
     $("#searchButton").on("click", e => {
        let value = $("#searchField").val();
        console.log(value);
        e.preventDefault();
        let myurl = "https://api.stackexchange.com/2.2/search?order=desc&sort=activity&intitle="
        myurl += value;
        myurl += "&site=stackoverflow";
        console.log(myurl);
        $.ajax({
            url: myurl,
            dataType: "json",
            success: function(parsed_json) {
                console.log(parsed_json);
                let everything = "<ul>";
                let myArray = parsed_json["items"];
                $.each(myArray, function(i, item) {
                    console.log(myArray[i]);
                    everything += "<li> <a href=\"" + myArray[i].link + "\">";
                    everything += myArray[i].title;
                    everything += "</a></li>";
                });
                everything += "</ul>";
                console.log(everything);
                $("#answers").html(everything);
            }
        });
    });
     
     $( "#cityField" ).keyup(function() {
        let url = "http://bioresearch.byu.edu/cs260/jquery/getcity.cgi?q="+$("#cityField").val();
        $.getJSON(url, function(data) {
            let everything;
            everything = "<ul>";
            $.each(data, function(i,item) {
            everything += "<li> "+data[i].city;
        });
        everything += "</ul>";
        $("#txtHint").html(everything);
    })
    .done(function() { console.log('getJSON request succeeded!'); })
    .fail(function(jqXHR, textStatus, errorThrown) { 
        console.log('getJSON request failed! ' + textStatus); 
        console.log("incoming "+jqXHR.responseText);
    })
    .always(function() { console.log('getJSON request ended!');
        });
    });
});
</script>
    
</body>
</html>